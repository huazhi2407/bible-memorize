# å‰µå»ºæ–°çš„ Firebase é …ç›®

## ğŸ¯ ç›®æ¨™

å‰µå»ºä¸€å€‹å…¨æ–°çš„ Firebase é …ç›®ï¼Œå¾é ­é–‹å§‹è¨­ç½®ï¼Œé¿å…ç¾æœ‰é …ç›®çš„é…ç½®å•é¡Œã€‚

## ğŸ“‹ æ­¥é©Ÿ 1ï¼šå‰µå»ºæ–°çš„ Firebase é …ç›®

### 1.1 å‰å¾€ Firebase Console

1. å‰å¾€ï¼šhttps://console.firebase.google.com/
2. é»æ“Šã€Œ**æ·»åŠ é …ç›®**ã€ï¼ˆæˆ–ã€ŒAdd projectã€ï¼‰

### 1.2 è¨­ç½®é …ç›®ä¿¡æ¯

1. **é …ç›®åç¨±**ï¼šè¼¸å…¥æ–°é …ç›®åç¨±ï¼ˆä¾‹å¦‚ï¼š`bible-memorize-new`ï¼‰
2. **Google Analytics**ï¼š
   - å»ºè­°é¸æ“‡ã€Œ**ä¸å•Ÿç”¨**ã€ï¼ˆé™¤éæ‚¨éœ€è¦åˆ†æåŠŸèƒ½ï¼‰
   - æˆ–é¸æ“‡ã€Œå•Ÿç”¨ã€ä¸¦é¸æ“‡æˆ–å‰µå»º Analytics å¸³æˆ¶
3. é»æ“Šã€Œ**å‰µå»ºé …ç›®**ã€ï¼ˆæˆ–ã€ŒContinueã€ï¼‰
4. ç­‰å¾…é …ç›®å‰µå»ºå®Œæˆï¼ˆé€šå¸¸å¹¾ç§’é˜ï¼‰

### 1.3 è¨˜éŒ„é …ç›®ä¿¡æ¯

å‰µå»ºå®Œæˆå¾Œï¼Œè¨˜ä¸‹ï¼š
- **é …ç›® ID**ï¼šä¾‹å¦‚ `bible-memorize-new-xxxxx`
- **é …ç›®åç¨±**ï¼šä¾‹å¦‚ `bible-memorize-new`

## ğŸ“‹ æ­¥é©Ÿ 2ï¼šå•Ÿç”¨ Firestore Database

### 2.1 å‰µå»º Firestore æ•¸æ“šåº«

1. åœ¨ Firebase Console å·¦å´é¸å–®ï¼Œé»æ“Šã€Œ**Firestore Database**ã€
2. é»æ“Šã€Œ**å‰µå»ºæ•¸æ“šåº«**ã€ï¼ˆæˆ–ã€ŒCreate databaseã€ï¼‰

### 2.2 é¸æ“‡æ¨¡å¼

1. é¸æ“‡ã€Œ**ä»¥æ¸¬è©¦æ¨¡å¼å•Ÿå‹•**ã€ï¼ˆé–‹ç™¼éšæ®µï¼‰
   - æˆ–é¸æ“‡ã€Œä»¥ç”Ÿç”¢æ¨¡å¼å•Ÿå‹•ã€ä¸¦é…ç½®è¦å‰‡
2. é»æ“Šã€Œ**ä¸‹ä¸€æ­¥**ã€

### 2.3 é¸æ“‡ä½ç½®

1. é¸æ“‡æ•¸æ“šåº«ä½ç½®ï¼ˆå»ºè­°é¸æ“‡é›¢æ‚¨æœ€è¿‘çš„å€åŸŸï¼‰ï¼š
   - `asia-east1`ï¼ˆå°ç£ã€é¦™æ¸¯ï¼‰
   - `asia-northeast1`ï¼ˆæ—¥æœ¬ï¼‰
   - `us-central1`ï¼ˆç¾åœ‹ä¸­éƒ¨ï¼‰
2. é»æ“Šã€Œ**å•Ÿç”¨**ã€
3. ç­‰å¾…æ•¸æ“šåº«å‰µå»ºå®Œæˆ

### 2.4 è¨­ç½®å®‰å…¨è¦å‰‡ï¼ˆå¯é¸ï¼‰

åœ¨ Firestore Database â†’ è¦å‰‡ï¼Œè¨­ç½®ï¼š

**ç”Ÿç”¢ç’°å¢ƒæ¨è–¦**ï¼š
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
```

é»æ“Šã€Œ**ç™¼å¸ƒ**ã€

## ğŸ“‹ æ­¥é©Ÿ 3ï¼šå•Ÿç”¨ Firebase Storage

### 3.1 å‰µå»º Storage

1. åœ¨ Firebase Console å·¦å´é¸å–®ï¼Œé»æ“Šã€Œ**Storage**ã€
2. é»æ“Šã€Œ**é–‹å§‹ä½¿ç”¨**ã€ï¼ˆæˆ–ã€ŒGet startedã€ï¼‰

### 3.2 è¨­ç½® Storage

1. é¸æ“‡ã€Œ**ä»¥æ¸¬è©¦æ¨¡å¼å•Ÿå‹•**ã€æˆ–ã€Œä»¥ç”Ÿç”¢æ¨¡å¼å•Ÿå‹•ã€
2. é¸æ“‡èˆ‡ Firestore ç›¸åŒçš„ä½ç½®
3. é»æ“Šã€Œ**å®Œæˆ**ã€

### 3.3 è¨­ç½® Storage è¦å‰‡

åœ¨ Storage â†’ è¦å‰‡ï¼Œè¨­ç½®ï¼š

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /recordings/{allPaths=**} {
      allow read: if true;
      allow write: if false;
    }
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}
```

é»æ“Šã€Œ**ç™¼å¸ƒ**ã€

## ğŸ“‹ æ­¥é©Ÿ 4ï¼šä¸‹è¼‰æœå‹™å¸³æˆ¶æ–‡ä»¶

### 4.1 ç”Ÿæˆæœå‹™å¸³æˆ¶å¯†é‘°

1. åœ¨ Firebase Consoleï¼Œé»æ“Šå³ä¸Šè§’çš„ã€Œ**âš™ï¸ é …ç›®è¨­ç½®**ã€
2. é¸æ“‡ã€Œ**æœå‹™å¸³æˆ¶**ã€æ¨™ç±¤
3. åœ¨ã€ŒFirebase Admin SDKã€éƒ¨åˆ†ï¼Œé¸æ“‡ã€Œ**Node.js**ã€
4. é»æ“Šã€Œ**ç”Ÿæˆæ–°çš„ç§å¯†é‡‘é‘°**ã€
5. ç¢ºèªä¸‹è¼‰

### 4.2 æ›¿æ›æœå‹™å¸³æˆ¶æ–‡ä»¶

1. å°‡ä¸‹è¼‰çš„ JSON æ–‡ä»¶é‡å‘½åç‚º `firebase-service-account.json`
2. **æ›¿æ›** `server-firebase/firebase-service-account.json` æ–‡ä»¶
3. âš ï¸ **é‡è¦**ï¼šä¸è¦å°‡æ­¤æ–‡ä»¶æäº¤åˆ° Git

## ğŸ“‹ æ­¥é©Ÿ 5ï¼šæ›´æ–°é…ç½®

### 5.1 æª¢æŸ¥æœå‹™å¸³æˆ¶æ–‡ä»¶

```bash
cd server-firebase
node check-service-account.js
```

ç¢ºèªé¡¯ç¤ºï¼š
- âœ… é …ç›® ID æ­£ç¢ºï¼ˆæ–°é …ç›®çš„ IDï¼‰
- âœ… æœå‹™å¸³æˆ¶é¡å‹æ­£ç¢º

### 5.2 æ¸¬è©¦é€£æ¥

```bash
node test-firestore-direct.js
```

æ‡‰è©²çœ‹åˆ°ï¼š
- âœ… Firebase Admin SDK åˆå§‹åŒ–æˆåŠŸ
- âœ… Firestore é€£æ¥æˆåŠŸ
- âœ… å¯«å…¥æ¸¬è©¦æˆåŠŸ

## ğŸ“‹ æ­¥é©Ÿ 6ï¼šå•Ÿå‹•æœå‹™å™¨

å¦‚æœæ¸¬è©¦æˆåŠŸï¼Œå•Ÿå‹•æœå‹™å™¨ï¼š

```bash
npm start
```

æ‡‰è©²çœ‹åˆ°ï¼š
```
Firebase Admin SDK åˆå§‹åŒ–æˆåŠŸ
é …ç›® ID: bible-memorize-new-xxxxx
Server running at http://localhost:3001
```

## âœ… æª¢æŸ¥æ¸…å–®

- [ ] æ–° Firebase é …ç›®å·²å‰µå»º
- [ ] Firestore Database å·²å•Ÿç”¨ï¼ˆNative æ¨¡å¼ï¼‰
- [ ] Firebase Storage å·²å•Ÿç”¨
- [ ] Firestore å®‰å…¨è¦å‰‡å·²è¨­ç½®
- [ ] Storage å®‰å…¨è¦å‰‡å·²è¨­ç½®
- [ ] æœå‹™å¸³æˆ¶ JSON æ–‡ä»¶å·²ä¸‹è¼‰ä¸¦æ›¿æ›
- [ ] æœå‹™å¸³æˆ¶æª¢æŸ¥é€šé
- [ ] Firestore é€£æ¥æ¸¬è©¦æˆåŠŸ
- [ ] æœå‹™å™¨å¯ä»¥æ­£å¸¸å•Ÿå‹•

## ğŸ”— å¿«é€Ÿéˆæ¥

- **Firebase Console**ï¼šhttps://console.firebase.google.com/
- **å‰µå»ºæ–°é …ç›®**ï¼šhttps://console.firebase.google.com/project/create
- **Firestore Database**ï¼šå‰µå»ºé …ç›®å¾Œè‡ªå‹•é¡¯ç¤º
- **Firebase Storage**ï¼šå‰µå»ºé …ç›®å¾Œè‡ªå‹•é¡¯ç¤º
- **æœå‹™å¸³æˆ¶**ï¼šé …ç›®è¨­ç½® â†’ æœå‹™å¸³æˆ¶

## ğŸ’¡ æç¤º

1. **é …ç›®åç¨±**ï¼šå¯ä»¥é¸æ“‡ä»»ä½•åç¨±ï¼Œä½†é …ç›® ID æœƒè‡ªå‹•ç”Ÿæˆ
2. **ä½ç½®é¸æ“‡**ï¼šé¸æ“‡é›¢æ‚¨æœ€è¿‘çš„å€åŸŸä»¥ç²å¾—æœ€ä½³æ€§èƒ½
3. **å®‰å…¨è¦å‰‡**ï¼šé–‹ç™¼éšæ®µå¯ä»¥ä½¿ç”¨æ¸¬è©¦æ¨¡å¼ï¼Œç”Ÿç”¢ç’°å¢ƒå¿…é ˆè¨­ç½®åš´æ ¼è¦å‰‡
4. **æœå‹™å¸³æˆ¶**ï¼šæ–°é …ç›®æœƒè‡ªå‹•å‰µå»ºæœå‹™å¸³æˆ¶ï¼Œç„¡éœ€æ‰‹å‹•å‰µå»º

## ğŸ› å¦‚æœé‡åˆ°å•é¡Œ

### Firestore é€£æ¥å¤±æ•—

1. ç¢ºèª Firestore Database å·²å‰µå»ºï¼ˆNative æ¨¡å¼ï¼‰
2. ç¢ºèª Cloud Firestore API å·²å•Ÿç”¨
3. ç¢ºèªæœå‹™å¸³æˆ¶æ–‡ä»¶æ­£ç¢º

### Storage é€£æ¥å¤±æ•—

1. ç¢ºèª Firebase Storage å·²å•Ÿç”¨
2. ç¢ºèª Storage å®‰å…¨è¦å‰‡å·²è¨­ç½®
3. ç¢ºèªæœå‹™å¸³æˆ¶æœ‰ Storage æ¬Šé™

## ğŸ“ è¨˜éŒ„æ–°é …ç›®ä¿¡æ¯

å‰µå»ºå®Œæˆå¾Œï¼Œè¨˜éŒ„ä»¥ä¸‹ä¿¡æ¯ï¼š

- **é …ç›® ID**ï¼š________________
- **é …ç›®åç¨±**ï¼š________________
- **Firestore ä½ç½®**ï¼š________________
- **Storage ä½ç½®**ï¼š________________
- **æœå‹™å¸³æˆ¶é›»å­éƒµä»¶**ï¼š________________

é€™äº›ä¿¡æ¯åœ¨éƒ¨ç½²æ™‚æœƒç”¨åˆ°ã€‚
